<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Base64 En/Decoding tests</title>
	<link rel="stylesheet" href="../../utils/qunit-1.10.0.css">
	<link rel="stylesheet" href="http://code.jquery.com/qunit/qunit-1.10.0.css">
</head>
<body>
	<div id="qunit"></div>
	<div id="qunit-fixture"></div>
	<script src="http://code.jquery.com/qunit/qunit-1.10.0.js"></script>
	<script src="../../utils/blanket.js"></script>

	<script src="../../src/base64.js"></script>
	<script>
		test("Base64 Sample", function() {
			//See http://en.wikipedia.org/wiki/Base64
			var text = "Man is distinguished, not only by his reason, but by this singular passion from other animals, which is a lust of the mind, that by a perseverance of delight in the continued and indefatigable generation of knowledge, exceeds the short vehemence of any carnal pleasure.";
			var value = [];
			for (var i = 0; i < text.length; i++){
				value.push(text.charCodeAt(i));
			}
			var base64 = readable.base64encode(value,text.length);
			equal(base64,"TWFuIGlzIGRpc3Rpbmd1aXNoZWQsIG5vdCBvbmx5IGJ5IGhpcyByZWFzb24sIGJ1dCBieSB0aGlzIHNpbmd1bGFyIHBhc3Npb24gZnJvbSBvdGhlciBhbmltYWxzLCB3aGljaCBpcyBhIGx1c3Qgb2YgdGhlIG1pbmQsIHRoYXQgYnkgYSBwZXJzZXZlcmFuY2Ugb2YgZGVsaWdodCBpbiB0aGUgY29udGludWVkIGFuZCBpbmRlZmF0aWdhYmxlIGdlbmVyYXRpb24gb2Yga25vd2xlZGdlLCBleGNlZWRzIHRoZSBzaG9ydCB2ZWhlbWVuY2Ugb2YgYW55IGNhcm5hbCBwbGVhc3VyZS4=");
			var value2 = readable.base64decode(base64);
			deepEqual(value2,value);
		});

		test("Base64 padding", function() {
			var values = [1,2,3,4];
			for( var i = 0; i < 4; i++){
				deepEqual(
					readable.base64decode(readable.base64encode(values.slice(0,i))),
					values.slice(0,i)
				);
			}
		});

		test("Error handling", function() {
			throws(function(){readable.base64decode("ABC")},Error, "Invalid input string");
		});
	</script>
</body>
</html>

