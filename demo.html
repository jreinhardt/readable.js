<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<style type="text/css">
			body {
			  font: 10px sans-serif;
			}

			.axis path, .axis line {
			  fill: none;
			  stroke: #000;
			  shape-rendering: crispEdges;
			}

			.line {
			  fill: none;
			  stroke: steelblue;
			  stroke-width: 1.5px;
			}

			.dot {
			  fill: white;
			  stroke: steelblue;
			  stroke-width: 1.5px;
			}
		</style>
		<script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript"></script>
		<script src="http://d3js.org/d3.v2.js" type="text/javascript"></script>
		<script src="readable.js" type="text/javascript"></script>
	</head>

	<body>
		<script type="text/javascript">
			var fry =  {};
			fry.isolines = [
			{points: [{x: 108.000, y: 9.603},{x: 108.882, y: 9.789},{x: 109.765, y: 9.981},{x: 110.647, y: 10.178},{x: 111.529, y: 10.383},{x: 112.411, y: 10.596},{x: 113.294, y: 10.820},{x: 114.176, y: 11.056},{x: 115.058, y: 11.305},{x: 115.940, y: 11.570},{x: 116.823, y: 11.851},{x: 117.705, y: 12.151},{x: 118.587, y: 12.470},{x: 119.469, y: 12.812},{x: 120.352, y: 13.176},{x: 121.234, y: 13.566},{x: 122.116, y: 13.982},{x: 122.998, y: 14.425},{x: 123.881, y: 14.899},{x: 124.763, y: 15.404},{x: 125.645, y: 15.941},{x: 126.527, y: 16.513},{x: 127.410, y: 17.121},{x: 128.292, y: 17.769},{x: 129.174, y: 18.463},{x: 130.056, y: 19.207},{x: 130.939, y: 20.007},{x: 131.821, y: 20.868},{x: 132.703, y: 21.795},{x: 133.585, y: 22.794},{x: 134.468, y: 23.870},{x: 135.350, y: 25.028}]},
			{points: [{x: 108.094, y: 7.913},{x: 109.215, y: 8.094},{x: 110.336, y: 8.282},{x: 111.457, y: 8.479},{x: 112.577, y: 8.684},{x: 113.698, y: 8.898},{x: 114.819, y: 9.121},{x: 115.940, y: 9.354},{x: 117.061, y: 9.596},{x: 118.182, y: 9.848},{x: 119.303, y: 10.110},{x: 120.424, y: 10.385},{x: 121.545, y: 10.675},{x: 122.666, y: 10.986},{x: 123.787, y: 11.320},{x: 124.908, y: 11.682},{x: 126.029, y: 12.076},{x: 127.150, y: 12.506},{x: 128.271, y: 12.975},{x: 129.392, y: 13.488},{x: 130.513, y: 14.049},{x: 131.634, y: 14.661},{x: 132.754, y: 15.328},{x: 133.875, y: 16.055},{x: 134.996, y: 16.845},{x: 136.117, y: 17.705},{x: 137.238, y: 18.646},{x: 138.359, y: 19.681},{x: 139.480, y: 20.824},{x: 140.601, y: 22.088},{x: 141.722, y: 23.485},{x: 142.843, y: 25.028}]},
			{points: [{x: 108.000, y: 6.492},{x: 109.196, y: 6.638},{x: 110.393, y: 6.792},{x: 111.589, y: 6.953},{x: 112.786, y: 7.123},{x: 113.982, y: 7.302},{x: 115.179, y: 7.490},{x: 116.375, y: 7.689},{x: 117.572, y: 7.898},{x: 118.768, y: 8.118},{x: 119.965, y: 8.349},{x: 121.161, y: 8.593},{x: 122.358, y: 8.850},{x: 123.554, y: 9.120},{x: 124.751, y: 9.403},{x: 125.947, y: 9.702},{x: 127.144, y: 10.015},{x: 128.340, y: 10.344},{x: 129.537, y: 10.697},{x: 130.733, y: 11.079},{x: 131.930, y: 11.499},{x: 133.126, y: 11.962},{x: 134.323, y: 12.477},{x: 135.519, y: 13.050},{x: 136.716, y: 13.688},{x: 137.912, y: 14.399},{x: 139.109, y: 15.189},{x: 140.305, y: 16.066},{x: 141.501, y: 17.036},{x: 142.698, y: 18.114},{x: 143.894, y: 19.320},{x: 145.091, y: 20.678}]},
			{points: [{x: 108.000, y: 5.670},{x: 109.281, y: 5.795},{x: 110.562, y: 5.924},{x: 111.843, y: 6.058},{x: 113.124, y: 6.199},{x: 114.405, y: 6.347},{x: 115.686, y: 6.502},{x: 116.968, y: 6.666},{x: 118.249, y: 6.839},{x: 119.530, y: 7.022},{x: 120.811, y: 7.215},{x: 122.092, y: 7.420},{x: 123.373, y: 7.637},{x: 124.654, y: 7.867},{x: 125.935, y: 8.111},{x: 127.216, y: 8.369},{x: 128.497, y: 8.642},{x: 129.778, y: 8.931},{x: 131.059, y: 9.237},{x: 132.341, y: 9.560},{x: 133.622, y: 9.902},{x: 134.903, y: 10.262},{x: 136.184, y: 10.649},{x: 137.465, y: 11.072},{x: 138.746, y: 11.541},{x: 140.027, y: 12.064},{x: 141.308, y: 12.653},{x: 142.589, y: 13.317},{x: 143.870, y: 14.065},{x: 145.151, y: 14.908},{x: 146.432, y: 15.855},{x: 147.713, y: 16.916}]},
			{points: [{x: 108.000, y: 5.005},{x: 109.363, y: 5.119},{x: 110.725, y: 5.238},{x: 112.088, y: 5.360},{x: 113.451, y: 5.487},{x: 114.813, y: 5.618},{x: 116.176, y: 5.753},{x: 117.539, y: 5.894},{x: 118.901, y: 6.041},{x: 120.264, y: 6.195},{x: 121.627, y: 6.358},{x: 122.989, y: 6.530},{x: 124.352, y: 6.713},{x: 125.715, y: 6.907},{x: 127.077, y: 7.113},{x: 128.440, y: 7.333},{x: 129.803, y: 7.567},{x: 131.165, y: 7.816},{x: 132.528, y: 8.082},{x: 133.891, y: 8.365},{x: 135.253, y: 8.666},{x: 136.616, y: 8.987},{x: 137.978, y: 9.328},{x: 139.341, y: 9.691},{x: 140.704, y: 10.076},{x: 142.066, y: 10.487},{x: 143.429, y: 10.937},{x: 144.792, y: 11.439},{x: 146.154, y: 12.006},{x: 147.517, y: 12.650},{x: 148.880, y: 13.385},{x: 150.242, y: 14.224}]},
			{points: [{x: 109.780, y: 4.005},{x: 111.154, y: 4.083},{x: 112.529, y: 4.169},{x: 113.904, y: 4.264},{x: 115.279, y: 4.368},{x: 116.653, y: 4.480},{x: 118.028, y: 4.601},{x: 119.403, y: 4.729},{x: 120.778, y: 4.865},{x: 122.152, y: 5.009},{x: 123.527, y: 5.161},{x: 124.902, y: 5.320},{x: 126.277, y: 5.486},{x: 127.651, y: 5.660},{x: 129.026, y: 5.841},{x: 130.401, y: 6.034},{x: 131.776, y: 6.238},{x: 133.150, y: 6.458},{x: 134.525, y: 6.696},{x: 135.900, y: 6.952},{x: 137.275, y: 7.231},{x: 138.649, y: 7.534},{x: 140.024, y: 7.864},{x: 141.399, y: 8.222},{x: 142.773, y: 8.611},{x: 144.148, y: 9.034},{x: 145.523, y: 9.492},{x: 146.898, y: 9.988},{x: 148.272, y: 10.529},{x: 149.647, y: 11.139},{x: 151.022, y: 11.848},{x: 152.397, y: 12.687}]},
			{points: [{x: 117.460, y: 3.449},{x: 118.735, y: 3.563},{x: 120.010, y: 3.657},{x: 121.285, y: 3.737},{x: 122.560, y: 3.809},{x: 123.835, y: 3.879},{x: 125.110, y: 3.952},{x: 126.385, y: 4.036},{x: 127.660, y: 4.131},{x: 128.935, y: 4.238},{x: 130.210, y: 4.356},{x: 131.485, y: 4.486},{x: 132.761, y: 4.627},{x: 134.036, y: 4.779},{x: 135.311, y: 4.942},{x: 136.586, y: 5.114},{x: 137.861, y: 5.297},{x: 139.136, y: 5.490},{x: 140.411, y: 5.692},{x: 141.686, y: 5.906},{x: 142.961, y: 6.135},{x: 144.236, y: 6.382},{x: 145.511, y: 6.653},{x: 146.786, y: 6.949},{x: 148.061, y: 7.274},{x: 149.336, y: 7.633},{x: 150.611, y: 8.028},{x: 151.886, y: 8.463},{x: 153.161, y: 8.943},{x: 154.436, y: 9.469},{x: 155.711, y: 10.047},{x: 156.986, y: 10.688}]},
			{points: [{x: 123.361, y: 2.357},{x: 124.542, y: 2.694},{x: 125.724, y: 2.970},{x: 126.905, y: 3.192},{x: 128.086, y: 3.371},{x: 129.268, y: 3.512},{x: 130.449, y: 3.626},{x: 131.630, y: 3.720},{x: 132.812, y: 3.802},{x: 133.993, y: 3.880},{x: 135.175, y: 3.964},{x: 136.356, y: 4.060},{x: 137.537, y: 4.171},{x: 138.719, y: 4.297},{x: 139.900, y: 4.438},{x: 141.081, y: 4.593},{x: 142.263, y: 4.761},{x: 143.444, y: 4.943},{x: 144.626, y: 5.137},{x: 145.807, y: 5.345},{x: 146.988, y: 5.564},{x: 148.170, y: 5.797},{x: 149.351, y: 6.046},{x: 150.532, y: 6.317},{x: 151.714, y: 6.615},{x: 152.895, y: 6.946},{x: 154.077, y: 7.313},{x: 155.258, y: 7.723},{x: 156.439, y: 8.180},{x: 157.621, y: 8.689},{x: 158.802, y: 9.256},{x: 159.983, y: 9.885}]},
			{points: [{x: 136.661, y: 2.007},{x: 137.507, y: 2.405},{x: 138.353, y: 2.734},{x: 139.199, y: 3.003},{x: 140.045, y: 3.220},{x: 140.891, y: 3.393},{x: 141.737, y: 3.531},{x: 142.583, y: 3.641},{x: 143.429, y: 3.733},{x: 144.275, y: 3.814},{x: 145.121, y: 3.893},{x: 145.967, y: 3.978},{x: 146.813, y: 4.077},{x: 147.659, y: 4.191},{x: 148.505, y: 4.320},{x: 149.351, y: 4.463},{x: 150.197, y: 4.621},{x: 151.043, y: 4.792},{x: 151.889, y: 4.977},{x: 152.735, y: 5.174},{x: 153.581, y: 5.384},{x: 154.427, y: 5.607},{x: 155.273, y: 5.843},{x: 156.119, y: 6.097},{x: 156.965, y: 6.373},{x: 157.811, y: 6.678},{x: 158.657, y: 7.017},{x: 159.503, y: 7.393},{x: 160.349, y: 7.814},{x: 161.195, y: 8.282},{x: 162.041, y: 8.805},{x: 162.887, y: 9.386}]},
			{points: [{x: 144.061, y: 2.007},{x: 144.807, y: 2.393},{x: 145.553, y: 2.714},{x: 146.299, y: 2.979},{x: 147.046, y: 3.194},{x: 147.792, y: 3.367},{x: 148.538, y: 3.505},{x: 149.285, y: 3.617},{x: 150.031, y: 3.709},{x: 150.777, y: 3.790},{x: 151.524, y: 3.866},{x: 152.270, y: 3.945},{x: 153.016, y: 4.035},{x: 153.762, y: 4.139},{x: 154.509, y: 4.258},{x: 155.255, y: 4.389},{x: 156.001, y: 4.534},{x: 156.748, y: 4.693},{x: 157.494, y: 4.863},{x: 158.240, y: 5.047},{x: 158.986, y: 5.242},{x: 159.733, y: 5.449},{x: 160.479, y: 5.667},{x: 161.225, y: 5.899},{x: 161.972, y: 6.148},{x: 162.718, y: 6.420},{x: 163.464, y: 6.719},{x: 164.210, y: 7.050},{x: 164.957, y: 7.417},{x: 165.703, y: 7.825},{x: 166.449, y: 8.278},{x: 167.196, y: 8.782}]},
			{points: [{x: 149.212, y: 2.007},{x: 149.922, y: 2.382},{x: 150.632, y: 2.697},{x: 151.342, y: 2.958},{x: 152.052, y: 3.171},{x: 152.762, y: 3.344},{x: 153.472, y: 3.483},{x: 154.182, y: 3.596},{x: 154.892, y: 3.689},{x: 155.602, y: 3.770},{x: 156.312, y: 3.844},{x: 157.022, y: 3.919},{x: 157.733, y: 4.002},{x: 158.443, y: 4.099},{x: 159.153, y: 4.208},{x: 159.863, y: 4.330},{x: 160.573, y: 4.466},{x: 161.283, y: 4.613},{x: 161.993, y: 4.773},{x: 162.703, y: 4.944},{x: 163.413, y: 5.127},{x: 164.123, y: 5.321},{x: 164.833, y: 5.526},{x: 165.543, y: 5.743},{x: 166.253, y: 5.973},{x: 166.963, y: 6.221},{x: 167.673, y: 6.491},{x: 168.383, y: 6.788},{x: 169.093, y: 7.116},{x: 169.803, y: 7.479},{x: 170.513, y: 7.881},{x: 171.223, y: 8.327}]},
			{points: [{x: 156.518, y: 2.007},{x: 157.050, y: 2.378},{x: 157.581, y: 2.690},{x: 158.113, y: 2.949},{x: 158.645, y: 3.162},{x: 159.177, y: 3.335},{x: 159.709, y: 3.474},{x: 160.240, y: 3.588},{x: 160.772, y: 3.681},{x: 161.304, y: 3.761},{x: 161.836, y: 3.835},{x: 162.367, y: 3.909},{x: 162.899, y: 3.990},{x: 163.431, y: 4.083},{x: 163.963, y: 4.189},{x: 164.494, y: 4.308},{x: 165.026, y: 4.439},{x: 165.558, y: 4.582},{x: 166.090, y: 4.737},{x: 166.622, y: 4.904},{x: 167.153, y: 5.082},{x: 167.685, y: 5.272},{x: 168.217, y: 5.472},{x: 168.749, y: 5.682},{x: 169.280, y: 5.905},{x: 169.812, y: 6.144},{x: 170.344, y: 6.405},{x: 170.876, y: 6.689},{x: 171.407, y: 7.003},{x: 171.939, y: 7.349},{x: 172.471, y: 7.732},{x: 173.003, y: 8.157}]},
			{points: [{x: 162.793, y: 2.007},{x: 163.177, y: 2.375},{x: 163.561, y: 2.685},{x: 163.945, y: 2.943},{x: 164.328, y: 3.155},{x: 164.712, y: 3.327},{x: 165.096, y: 3.467},{x: 165.479, y: 3.581},{x: 165.863, y: 3.675},{x: 166.247, y: 3.755},{x: 166.631, y: 3.829},{x: 167.014, y: 3.902},{x: 167.398, y: 3.981},{x: 167.782, y: 4.071},{x: 168.165, y: 4.175},{x: 168.549, y: 4.291},{x: 168.933, y: 4.419},{x: 169.317, y: 4.559},{x: 169.700, y: 4.711},{x: 170.084, y: 4.875},{x: 170.468, y: 5.049},{x: 170.852, y: 5.235},{x: 171.235, y: 5.431},{x: 171.619, y: 5.637},{x: 172.003, y: 5.855},{x: 172.386, y: 6.089},{x: 172.770, y: 6.341},{x: 173.154, y: 6.617},{x: 173.538, y: 6.920},{x: 173.921, y: 7.255},{x: 174.305, y: 7.624},{x: 174.689, y: 8.033}]},
			{points: [{x: 169.256, y: 2.044},{x: 169.474, y: 2.379},{x: 169.691, y: 2.665},{x: 169.909, y: 2.907},{x: 170.126, y: 3.109},{x: 170.344, y: 3.277},{x: 170.561, y: 3.415},{x: 170.779, y: 3.529},{x: 170.997, y: 3.624},{x: 171.214, y: 3.704},{x: 171.432, y: 3.775},{x: 171.649, y: 3.842},{x: 171.867, y: 3.910},{x: 172.084, y: 3.983},{x: 172.302, y: 4.066},{x: 172.519, y: 4.159},{x: 172.737, y: 4.264},{x: 172.954, y: 4.379},{x: 173.172, y: 4.503},{x: 173.389, y: 4.638},{x: 173.607, y: 4.783},{x: 173.825, y: 4.937},{x: 174.042, y: 5.101},{x: 174.260, y: 5.273},{x: 174.477, y: 5.455},{x: 174.695, y: 5.645},{x: 174.912, y: 5.845},{x: 175.130, y: 6.058},{x: 175.347, y: 6.286},{x: 175.565, y: 6.534},{x: 175.782, y: 6.803},{x: 176.000, y: 7.098}]},
			];

			fry.midline = 
			{points: [{x: 120.364, y: 14.224},{x: 122.155, y: 13.043},{x: 123.947, y: 12.067},{x: 125.739, y: 11.258},{x: 127.530, y: 10.575},{x: 129.322, y: 9.979},{x: 131.114, y: 9.436},{x: 132.906, y: 8.939},{x: 134.697, y: 8.485},{x: 136.489, y: 8.070},{x: 138.281, y: 7.691},{x: 140.072, y: 7.346},{x: 141.864, y: 7.031},{x: 143.656, y: 6.743},{x: 145.447, y: 6.479},{x: 147.239, y: 6.237},{x: 149.031, y: 6.013},{x: 150.823, y: 5.803},{x: 152.614, y: 5.606},{x: 154.406, y: 5.419},{x: 156.198, y: 5.239},{x: 157.989, y: 5.069},{x: 159.781, y: 4.908},{x: 161.573, y: 4.756},{x: 163.364, y: 4.613},{x: 165.156, y: 4.481},{x: 166.948, y: 4.358},{x: 168.740, y: 4.245},{x: 170.531, y: 4.143},{x: 172.323, y: 4.051},{x: 174.115, y: 3.970},{x: 175.906, y: 3.899}]};

			var margin = {top: 10, right: 10, bottom: 20, left: 40},
				width = 600 - margin.left - margin.right,
				height = 500 - margin.top - margin.bottom;

			var x = d3.scale.linear()
				.domain([100, 200])
				.range([0, width]);

			var y = d3.scale.linear()
				.domain([0, 30])
				.range([height, 0]);

			var xAxis = d3.svg.axis()
				.scale(x)
				.orient("bottom");

			var yAxis = d3.svg.axis()
				.scale(y)
				.orient("left");

			var line = d3.svg.line()
				.x(function(d) { return x(d.x); })
				.y(function(d) { return y(d.y); });

			var autoUpdateTimer;
			var AUTO_UPDATE_TIMEOUT = 500; // in ms

			$(document).ready(function() {
				//Plot graph
				var svg = d3.select("body").append("svg")
					.attr("width", width + margin.left + margin.right)
					.attr("height", height + margin.top + margin.bottom)
				  .append("g")
					.attr("transform", "translate(" + margin.left + "," + margin.top + ")");

				svg.append("g")
					.attr("class", "x axis")
					.attr("transform", "translate(0," + height + ")")
					.call(xAxis);

				svg.append("g")
					.attr("class", "y axis")
					.call(yAxis);
/*
				svg.append("path")
					.datum(fry.midline.points)
					.attr("class", "line")
					.attr("d", line);
*/

				for(var i=0; i<fry.isolines.length; i++){
					svg.append("path")
						.datum(fry.isolines[i].points)
						.attr("class", "line")
						.attr("d", line);
				}

				//Prepare update timer
				$('#text').on('input paste', function() {
					clearTimeout(autoUpdateTimer);
					if ($('#text').val) {
						autoUpdateTimer = setTimeout(update, AUTO_UPDATE_TIMEOUT);
					}
				});
			});

			function update(evt) {
				var coordinates = [];
				var text = readable.Text(document.form.text.value);
				var sentences = text.getSentences();
				for(var i=0; i< sentences.length;i++){
					var s = readable.Text(sentences[i]);
					var res = {};
					res.x = s.getNumSyllables()/s.getNumWords()*100;
					res.y = 1/s.getNumWords()*100;
					res.text = sentences[i];
					coordinates.push(res);
				}

				var points = d3.select("body svg g").selectAll(".dot")
					.data(coordinates);

				points
					.transition().duration(500)
					.attr("cx", line.x())
					.attr("cy", line.y())
					.attr("r", 3.5);

				points.enter()
					.append("circle")
					.transition().duration(500)
					.attr("class", "dot")
					.attr("cx", line.x())
					.attr("cy", line.y())
					.attr("r", 3.5);

				points.exit()
					.transition().duration(500)
					.attr("r",0);
			}
		</script>
		<div id="content">

			<h1>readable.js</h1>

			<p><i>readable.js</i> is a Javascript library for
			readability analysis. Get it <a href="http://www.github.com/jreinhardt/readable.js">on github</a>.</p>

			<h2>Try it now!</h2>
			<p>Type or paste a text and see how readable it is compared to other
			texts:</p>
			<form name="form">
				<textarea name="text" id="text" cols="72" rows="10"></textarea>
			</form>

			<div id="results"></div>
			<div id="legend"></div>
		</div>
	</body>
</html>
