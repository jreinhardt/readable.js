<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript"></script>
		<script src="readable.js" type="text/javascript"></script>

		<script type="text/javascript">


			/*
			Auto-update with typing time-out.
			*/
			var autoUpdateTimer;
			var AUTO_UPDATE_TIMEOUT = 1000; // in ms

			$(document).ready(function() {
				$('#text').keyup(function() {
					clearTimeout(autoUpdateTimer);
					if ($('#text').val) {
						autoUpdateTimer = setTimeout(update, AUTO_UPDATE_TIMEOUT);
					}
				});
			});

			function update(evt) {
				var text = document.form.text.value;
				var words = split_into_words(text);
				var sentences = split_into_sentences(text);
				var ns = sentences.length;
				var nw = words.length;
				var nc = count_complex_words(words);
				var nl = count_letters(text);
				var nsyl = 0;
				var i;
				for (i = 0; i < words.length; i++) {
					nsyl += count_syllables(words[i]);
				}
				var f = flesh_index(ns, nw, nsyl);
				var cl = coleman_liau_index(ns, nw, nl);
				var ari = automated_readability_index(ns, nw, nl);
				var gf = gunning_fog_index(ns, nw, nc);
				document.getElementById("num_syllables").innerHTML = nsyl;
				document.getElementById("num_words").innerHTML = nw;
				document.getElementById("num_complex_words").innerHTML = nw;
				document.getElementById("num_sentences").innerHTML = ns;
				document.getElementById("num_letters").innerHTML = nl;
				document.getElementById("flesh").innerHTML = f;
				document.getElementById("coleman_liau").innerHTML = cl;
				document.getElementById("ari").innerHTML = ari;
				document.getElementById("gunning_fog").innerHTML = gf;
			}

		</script>
	</head>

	<body>

		<!-- Javascript support check -->
		<div id="no_javascript" style="border:1px solid #f00;">This site requires JavaScript. Please enable JavaScript-support in your browser.</div>
		<script type="text/javascript">
			element = document.getElementById("no_javascript");
			element.parentNode.removeChild(element);
		</script>


		<form name="form">
			<textarea name="text" id="text" cols="80" rows="10"></textarea>
		</form>
		<table>
			<tr><th>Number of syllables</th><td id="num_syllables">0</td></tr>
			<tr><th>Number of words</th><td id="num_words">0</td></tr>
			<tr><th>Number of complex words</th><td id="num_complex_words">0</td></tr>
			<tr><th>Number of sentences</th><td id="num_sentences">0</td></tr>
			<tr><th>Number of letters</th><td id="num_letters">0</td></tr>
			<tr><th>Flesch index</th><td id="flesh">0</td><td>0 to 100, larger is easier</td></tr>
			<tr><th>Coleman-Liau index</th><td id="coleman_liau">0</td><td>positive, larger is more difficult</td></tr>
			<tr><th>Automated Readability Index</th><td id="ari">0</td><td>positive, larger is more difficult</td></tr>
			<tr><th>Gunning-Fog Index</th><td id="gunning_fog">0</td><td>positive, larger is more difficult</td></tr>
		</table>

	</body>
</html>
